{"version":3,"sources":["Autocomplete.js","img/kmb-water.png","BusStop.js","App.js","index.js"],"names":["useStyles","makeStyles","option","fontSize","marginRight","ListboxComponent","React","forwardRef","props","ref","children","role","other","itemCount","Array","isArray","length","height","width","rowHeight","overscanCount","rowCount","rowRenderer","cloneElement","index","style","StopSelect","classes","useState","isLoading","setIsLoading","station","setStation","useEffect","fetch","then","res","json","result","console","log","data","Autocomplete","id","onChange","event","value","changeSelectStop","stop","defaultValue","find","element","defaultStop","options","autoHighlight","getOptionLabel","name_tc","name_en","renderOption","Fragment","renderInput","params","TextField","label","variant","inputProps","autoComplete","theme","title","flexGrow","align","menuButton","spacing","typography","min","createTheme","responsiveFontSizes","BusStop","lastupdts","setLastupdts","lastrefreshts","setLastrefreshts","selectStop","setSelectStop","defaultnumETA","numETA","setNumETA","displayCounter","fetchKMB","filter","eta","eta_seq","service_type","isSpecialRoute","rmk_en","includes","generated_timestamp","moment","renderETA","exp","etaInSecond","diff","etaInMin","Typography","isMobile","setInterval","clearInterval","useImperativeHandle","ThemeProvider","Grid","container","padding","minWidth","direction","justify","alignItems","flex","justifyContent","ButtonGroup","Button","onClick","disabled","format","map","route","minHeight","className","dest_tc","dest_en","rmk_tc","src","kmbwater","alt","SimpleCard","openSideBar","setOpenSideBar","setIsSpecialRoute","elRefs","setElRefs","arrayDefaultStops","setArrayDefaultStops","cookies","Cookies","fill","_","i","createRef","get","AppBar","color","Toolbar","IconButton","edge","aria-label","e","current","SwipeableDrawer","open","onOpen","StationJSON","JSON","stringify","set","path","maxAge","state","FormGroup","column","FormControlLabel","control","Checkbox","checked","target","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.ba962b95.chunk.js","sourcesContent":["/* eslint-disable no-use-before-define */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport Stations from \"./station.json\";\r\nimport { isMobile } from 'react-device-detect';\r\n\r\nimport { List } from \"react-virtualized\";\r\n\r\nconst useStyles = makeStyles({\r\n  option: {\r\n    fontSize: 15,\r\n    \"& > span\": {\r\n      marginRight: 10,\r\n      fontSize: 18\r\n    }\r\n  }\r\n});\r\n\r\nconst ListboxComponent = React.forwardRef(function ListboxComponent(\r\n  props,\r\n  ref\r\n) {\r\n  const { children, role, ...other } = props;\r\n  const itemCount = Array.isArray(children) ? children.length : 0;\r\n  const itemSize = 36;\r\n\r\n  return (\r\n    <div ref={ref}>\r\n      <div {...other}>\r\n        <List\r\n          height={250}\r\n          width={1000}\r\n          rowHeight={itemSize}\r\n          overscanCount={5}\r\n          rowCount={itemCount}\r\n          rowRenderer={props => {\r\n            return React.cloneElement(children[props.index], {\r\n              style: props.style\r\n            });\r\n          }}\r\n          role={role}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default function StopSelect(props) {\r\n  const classes = useStyles();\r\n  const getAllStation = () => {\r\n    fetch(\"https://data.etabus.gov.hk/v1/transport/kmb/stop\")\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        return result.data;\r\n      });\r\n  };\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [station, setStation] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetch(\"https://data.etabus.gov.hk/v1/transport/kmb/stop\")\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        console.log(result);\r\n        setStation(result.data);\r\n        setIsLoading(false);\r\n        // console.log(\"station\", station);\r\n        // console.log(\r\n        //   station.find((element) => element.stop === \"8AFF8B43EC3E547F\")\r\n        // );\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"useeffect get station\", getAllStation());\r\n  }, []);\r\n\r\n  return !isLoading ? (\r\n    <Autocomplete\r\n      id=\"country-busstop\"\r\n      onChange={(event, value) => {\r\n        //console.log(value.stop);\r\n        if (value !== null) props.changeSelectStop(value.stop);\r\n      }}\r\n      defaultValue={station.find(\r\n        (element) => element.stop === props.defaultStop\r\n      )}\r\n      ListboxComponent={ListboxComponent}\r\n      options={station}\r\n      classes={{\r\n        option: classes.option\r\n      }}\r\n      autoHighlight\r\n      getOptionLabel={(option) => option.name_tc + \" \" + option.name_en}\r\n      renderOption={(option) => (\r\n        <React.Fragment>\r\n          {option.name_tc} {option.name_en}\r\n        </React.Fragment>\r\n      )}\r\n      renderInput={(params) => (\r\n        <TextField\r\n          {...params}\r\n          label=\"Choose a bus stop\"\r\n          variant=\"outlined\"\r\n          inputProps={{\r\n            ...params.inputProps,\r\n            autoComplete: \"new-password\" // disable autocomplete and autofill\r\n          }}\r\n        />\r\n      )}\r\n    />\r\n  ) : (\r\n    \"Loading\"\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/kmb-water.23d62c4c.png\";","import React, {\r\n  useState,\r\n  useEffect,\r\n  forwardRef,\r\n  useImperativeHandle\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { createTheme, responsiveFontSizes, ThemeProvider } from '@material-ui/core/styles';\r\nimport Button from \"@material-ui/core/Button\";\r\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport moment from \"moment\";\r\n\r\nimport Autocomplete from \"./Autocomplete\";\r\n\r\nimport kmbwater from \"./img/kmb-water.png\";\r\n\r\nimport { isMobile } from 'react-device-detect';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  // root: {\r\n  //   minWidth: 275\r\n  // },\r\n  title: {\r\n    flexGrow: 2,\r\n    align: \"center\"\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2)\r\n  },\r\n  typography: {\r\n    align: \"center\"\r\n  },\r\n  min: {\r\n    align: \"center\"\r\n  }\r\n}));\r\n\r\nlet theme = createTheme();\r\ntheme = responsiveFontSizes(theme);\r\n\r\nconst BusStop = (props, ref) => {\r\n  const classes = useStyles();\r\n  const [station, setStation] = useState([]);\r\n  const [lastupdts, setLastupdts] = useState();\r\n  const [lastrefreshts, setLastrefreshts] = useState();\r\n  const [selectStop, setSelectStop] = useState(\r\n    props.defaultStop ? props.defaultStop : \"9583BCF159B682BA\"\r\n  );\r\n  const [numETA, setNumETA] = useState(\r\n    props.defaultnumETA ? props.defaultnumETA : 1\r\n  );\r\n  const url = \"https://data.etabus.gov.hk/v1/transport/kmb/stop-eta/\";\r\n  const displayCounter = numETA > 0;\r\n\r\n  const changeSelectStop = (stop) => {\r\n    setSelectStop(stop);\r\n  };\r\n\r\n  const fetchKMB = () => {\r\n    console.log(\"fetchKMB\");\r\n    fetch(url + selectStop)\r\n      .then((res) => res.json())\r\n      .then((result) => {\r\n        console.log(result);\r\n        setStation(\r\n          result.data.filter(\r\n            (eta) =>\r\n              eta.eta_seq <= numETA &&\r\n              eta.service_type === 1 &&\r\n              (props.isSpecialRoute ? true : !eta.rmk_en.includes(\"route only\"))\r\n          )\r\n        );\r\n        setLastupdts(result.generated_timestamp);\r\n        setLastrefreshts(moment());\r\n      });\r\n  };\r\n\r\n  const renderETA = (eta) => {\r\n    var exp = moment(eta);\r\n    var etaInSecond = moment().diff(exp, \"seconds\") * -1;\r\n    var etaInMin = moment().diff(exp, \"minutes\") * -1;\r\n    if(eta == null) return <Typography variant={isMobile?\"subtitle2\":\"h5\"}>沒有班次</Typography>\r\n    return <Typography variant={isMobile?\"h6\":\"h4\"}>{etaInSecond > 60 ? etaInMin + \" min\" : \"- min\"}</Typography>\r\n\r\n    \r\n  };\r\n\r\n  const handleIncrement = () => {\r\n    setNumETA(numETA + 1);\r\n  };\r\n\r\n  const handleDecrement = () => {\r\n    setNumETA(numETA - 1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchKMB();\r\n    let id = setInterval(() => {\r\n      fetchKMB();\r\n    }, 5000);\r\n    return () => clearInterval(id);\r\n  }, [selectStop, numETA, props.isSpecialRoute]);\r\n\r\n  useImperativeHandle(\r\n    ref,\r\n    () => ({\r\n      selectStop,\r\n      numETA\r\n    }),\r\n    [selectStop, numETA]\r\n  );\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <Grid>\r\n        <Grid container style={{ padding: \"5px\", minWidth: isMobile?\"60vw\":\"40vw\" }}>\r\n        \r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n            justify=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Grid align=\"center\" style={{ flex: 2 }}>\r\n              <Autocomplete\r\n                changeSelectStop={changeSelectStop}\r\n                defaultStop={props.defaultStop}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Grid alignItems=\"left\" justifyContent=\"center\">\r\n            <ButtonGroup>\r\n              <Button onClick={handleIncrement}>+</Button>\r\n              {displayCounter && <Button disabled>{numETA}</Button>}\r\n              {displayCounter && <Button onClick={handleDecrement}>-</Button>}\r\n            </ButtonGroup>\r\n          </Grid>\r\n          <Grid direction=\"row\" style={{ flex: 1, align: \"center\" }}>\r\n            <Typography align=\"right\" variant=\"subtitle2\">\r\n              Last Update: {moment(lastupdts).format(\"YYYY/MM/DD HH:mm:ss\")}\r\n            </Typography>\r\n            <Typography align=\"right\" variant=\"subtitle2\">\r\n              Last Refresh:{\" \"}\r\n              {moment(lastrefreshts).format(\"YYYY/MM/DD HH:mm:ss\")}\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid direction=\"row\" justify=\"space-between\" alignItems=\"center\">\r\n          {station.map((route, index) => (\r\n            <Grid\r\n              container\r\n              direction=\"row\"\r\n              justify=\"space-between\"\r\n              alignItems=\"center\"\r\n              style={{\r\n                minHeight: '10vh'\r\n              }}\r\n            >\r\n              <Grid\r\n                style={{\r\n                  flex: 1,\r\n                }}\r\n              >\r\n                {route.eta_seq === 1 && (\r\n                  <Typography align=\"center\" variant=\"h3\">\r\n                    {route.route}\r\n                  </Typography>\r\n                )}\r\n              </Grid>\r\n              <Grid\r\n                style={{\r\n                  flex: 4\r\n                  //backgroundColor: \"red\"\r\n                }}\r\n              >\r\n                {route.eta_seq === 1 && (\r\n                  <Typography\r\n                    align=\"center\"\r\n                    variant=\"h5\"\r\n                    className={classes.typography}\r\n                  >\r\n                    <Typography variant=\"h5\" className={classes.typography}>\r\n                      {route.dest_tc}\r\n                    </Typography>\r\n                    {!isMobile &&\r\n                    <Typography variant=\"h6\" className={classes.typography}>\r\n                      {route.dest_en}\r\n                    </Typography>}\r\n                  </Typography>\r\n                )}\r\n              </Grid>\r\n              {/* <ListItemText primary={route.route} secondary={route.dest_tc} /> */}\r\n              <Grid\r\n                style={{\r\n                  flex: 1\r\n                  //backgroundColor: \"red\"\r\n                }}\r\n              >\r\n                <Typography align=\"center\" className={classes.min}>\r\n                  {/* <Typography>{moment(route.eta).fromNow()}</Typography>\r\n              <Typography>{route.rmk_tc}</Typography> */}\r\n\r\n                  {renderETA(route.eta)}\r\n                  <Typography variant={!isMobile?\"h6\":\"subtitle2\"}>{route.rmk_tc}</Typography>\r\n                </Typography>\r\n              </Grid>\r\n              {!isMobile && <img\r\n                src={kmbwater}\r\n                className=\"photo\"\r\n                alt=\"KMB\"\r\n                width=\"100px\"\r\n                height=\"100px\"\r\n              />}\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      </Grid>\r\n    </ThemeProvider>);\r\n};\r\n\r\nexport default forwardRef(BusStop);\r\n","import React, { useState, useEffect, createRef } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\";\nimport SwipeableDrawer from \"@material-ui/core/SwipeableDrawer\";\n\n//checkbox\nimport FormGroup from \"@material-ui/core/FormGroup\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport CheckBoxOutlineBlankIcon from \"@material-ui/icons/CheckBoxOutlineBlank\";\nimport CheckBoxIcon from \"@material-ui/icons/CheckBox\";\nimport Favorite from \"@material-ui/icons/Favorite\";\nimport FavoriteBorder from \"@material-ui/icons/FavoriteBorder\";\n\n//cookies\nimport Cookies from \"universal-cookie\";\n\nimport BusStop from \"./BusStop\";\n\nconst useStyles = makeStyles((theme) => ({\n  BusStop: {\n    flexGrow: 2,\n    align: \"center\"\n  }\n}));\n\nexport default function SimpleCard() {\n  const classes = useStyles();\n  const [numStop, setNumStop] = useState(1);\n  const [openSideBar, setOpenSideBar] = useState(false);\n  const [isSpecialRoute, setIsSpecialRoute] = useState(false);\n  const [elRefs, setElRefs] = useState([]);\n  const [arrayDefaultStops, setArrayDefaultStops] = useState([]);\n  const cookies = new Cookies();\n\n  const handleCheckBox = (event) => {\n    setIsSpecialRoute(event.target.checked);\n  };\n\n  const handleOpenSideBar = () => {\n    setOpenSideBar(true);\n  };\n\n  const handleCloseSideBar = () => {\n    setOpenSideBar(false);\n  };\n\n  const handleSave = () => {\n    const StationJSON = JSON.stringify(elRefs);\n    console.log(elRefs);\n    console.log(StationJSON);\n\n    const cookies = new Cookies();\n\n    cookies.set(\"station\", StationJSON, {\n      path: \"/\",\n      maxAge: 2147483647\n    });\n  };\n\n  const handleAddStation = () => {\n    setArrayDefaultStops((state) => [\n      ...state,\n      {\n        current: { stop: \"\", numETA: 1 }\n      }\n    ]);\n  };\n\n  const handleRemoveAll = () => {\n    setArrayDefaultStops([]);\n  };\n\n  const displayCounter = numStop > 0;\n  const arrLength = numStop;\n\n  useEffect(() => {\n    setElRefs((elRefs) =>\n      Array(arrayDefaultStops.length)\n        .fill()\n        .map((_, i) => elRefs[i] || createRef())\n    );\n  }, [\n    //numStop,\n    arrayDefaultStops\n  ]);\n\n  useEffect(() => {\n    console.log(\"elRefs\", elRefs);\n  }, [elRefs]);\n\n  useEffect(() => {\n    const station = cookies.get(\"station\");\n    if (station) {\n      setArrayDefaultStops(station);\n    }\n  }, []);\n\n  return (\n    <Grid>\n      <AppBar color=\"secondary\">\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"menu\"\n            onClick={handleOpenSideBar}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" className={classes.title}>\n            Bus Arrival Time\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <Toolbar />\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"flex-start\"\n        alignItems=\"baseline\"\n      >\n        {arrayDefaultStops.map((e, i) => (\n          <Grid style={{ flex: 1 }}>\n            <BusStop\n              ref={elRefs[i]}\n              isSpecialRoute={isSpecialRoute}\n              defaultStop={e.current.selectStop}\n              defaultnumETA={e.current.numETA}\n            />\n          </Grid>\n        ))}\n      </Grid>\n      <SwipeableDrawer open={openSideBar} onOpen={openSideBar}>\n        <Button onClick={handleCloseSideBar}>Close</Button>\n        <Button onClick={handleSave}>Save</Button>\n        <Button onClick={handleAddStation}>add</Button>\n        <Button onClick={handleRemoveAll}>remove all</Button>\n        {/* <ButtonGroup>\n          <Button onClick={handleIncrement}>+</Button>\n          {displayCounter && <Button disabled>{numStop}</Button>}\n          {displayCounter && <Button onClick={handleDecrement}>-</Button>}\n        </ButtonGroup> */}\n\n        <FormGroup column>\n          <FormControlLabel\n            control={\n              <Checkbox checked={isSpecialRoute} onChange={handleCheckBox} />\n            }\n            label=\"特別路線\"\n          />\n        </FormGroup>\n      </SwipeableDrawer>\n    </Grid>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}